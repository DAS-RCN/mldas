pages:
  image: python:3.7
  script:
  - mkdir .public
  - apt-get update -q -y
  - apt-get install -y python-pip
  - apt-get install -y pandoc
  - apt-get install hdf5-tools
  - git submodule update --init -- docs
  - pip install -U sphinx sphinx-material recommonmark numpydoc nbsphinx sphinx_markdown_tables sphinx_copybutton ipython
  - pip install -U h5py scipy hdf5 storage matplotlib mpi4py numpy pillow pyyaml scipy torch torchvision
  - export PATH=$PATH:$PWD/bin
  - export PYTHONPATH=$PYTHONPATH:$PWD
  - cd docs
  - make html
  - cd ../ 
  - cp -r docs/_build/* .public
  - mv .public public
  artifacts:
    paths:
    - public
  only:
  - master
